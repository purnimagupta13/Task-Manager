<div class="card p-3 mt-3 shadow-sm">
  <h3>User Management</h3>

  <table class="table table-striped table-hover mt-3">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th style="width: 220px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of users">
        <td>{{ (u.firstName || '') + ' ' + (u.lastName || '') }}</td>
        <td>{{ u.email }}</td>
        <td class="text-capitalize">{{ u.role }}</td>
        <td>
          <button class="btn btn-sm btn-warning me-2" (click)="startEdit(u)" *ngIf="editingEmail !== u.email">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteUser(u.email)" *ngIf="editingEmail !== u.email">Delete</button>
          <div *ngIf="editingEmail === u.email" class="d-flex gap-2">
            <button class="btn btn-sm btn-success" (click)="saveEdit()">Save</button>
            <button class="btn btn-sm btn-secondary" (click)="cancelEdit()">Cancel</button>
          </div>
        </td>
      </tr>
      <tr *ngIf="users.length === 0">
        <td colspan="4" class="text-center text-muted">No users found</td>
      </tr>
    </tbody>
  </table>

  <!-- simple inline editor -->
  <div class="card p-3 mt-3" *ngIf="editingEmail">
    <h5>Edit User</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <label>First Name</label>
        <input class="form-control" [(ngModel)]="editData.firstName">
      </div>
      <div class="col-md-6">
        <label>Last Name</label>
        <input class="form-control" [(ngModel)]="editData.lastName">
      </div>
      <div class="col-md-6">
        <label>Phone</label>
        <input class="form-control" [(ngModel)]="editData.phone">
      </div>
      <div class="col-md-6">
        <label>Address</label>
        <input class="form-control" [(ngModel)]="editData.address">
      </div>
    </div>
    <div class="mt-3">
      <button class="btn btn-success me-2" (click)="saveEdit()">Save</button>
      <button class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
    </div>
  </div>
</div>
